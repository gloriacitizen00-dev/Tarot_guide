<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Familiar's Guidance</title>
  <style>
    #familiar-spread {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 30px;
    }
    .row {
      display: flex;
      justify-content: center;
      margin: 10px 0;
    }
    .tarot-card {
      width: 120px;
      height: auto;
      margin: 0 8px;
    }
    #final-message {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }
    #question {
      margin-top: 20px;
      font-size: 16px;
      text-align: center;
    }
    .choice-buttons {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }
    .choice-buttons button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>Familiar's Guidance Spread</h1>
  <div id="familiar-spread"></div>

  <div id="final-message">Final message: This is a placeholder interpretation of your 10 cards.</div>

  <div id="question">Would you like another reading?</div>
  <div class="choice-buttons">
    <button onclick="location.href='shopping.html'">Yes</button>
    <button onclick="location.href='Spreads.html'">No</button>
  </div>

  <script>
    // Define decks with actual filenames
    const decks = {
      major: [
        "TheFool.jpg","TheMagician.jpg","TheHighPriestess.jpg","TheEmpress.jpg","TheEmperor.jpg",
        "TheHierophant.jpg","TheLovers.jpg","TheChariot.jpg","Strength.jpg","TheHermit.jpg",
        "WheelOfFortune.jpg","Justice.jpg","TheHangedMan.jpg","Death.jpg","Temperance.jpg",
        "TheDevil.jpg","TheTower.jpg","TheStar.jpg","TheMoon.jpg","TheSun.jpg","Judgement.jpg","TheWorld.jpg"
      ],
      cups: [
        "AceOfCups.jpg","TwoOfCups.jpg","ThreeOfCups.jpg","FourOfCups.jpg","FiveOfCups.jpg",
        "SixOfCups.jpg","SevenOfCups.jpg","EightOfCups.jpg","NineOfCups.jpg","TenOfCups.jpg",
        "PageOfCups.jpg","KnightOfCups.jpg","QueenOfCups.jpg","KingOfCups.jpg"
      ],
      swords: [
        "AceOfSwords.jpg","TwoOfSwords.jpg","ThreeOfSwords.jpg","FourOfSwords.jpg","FiveOfSwords.jpg",
        "SixOfSwords.jpg","SevenOfSwords.jpg","EightOfSwords.jpg","NineOfSwords.jpg","TenOfSwords.jpg",
        "PageOfSwords.jpg","KnightOfSwords.jpg","QueenOfSwords.jpg","KingOfSwords.jpg"
      ],
      pentacles: [
        "AceOfPentacles.jpg","TwoOfPentacles.jpg","ThreeOfPentacles.jpg","FourOfPentacles.jpg","FiveOfPentacles.jpg",
        "SixOfPentacles.jpg","SevenOfPentacles.jpg","EightOfPentacles.jpg","NineOfPentacles.jpg","TenOfPentacles.jpg",
        "PageOfPentacles.jpg","KnightOfPentacles.jpg","QueenOfPentacles.jpg","KingOfPentacles.jpg"
      ],
      wands: [
        "AceOfWands.jpg","TwoOfWands.jpg","ThreeOfWands.jpg","FourOfWands.jpg","FiveOfWands.jpg",
        "SixOfWands.jpg","SevenOfWands.jpg","EightOfWands.jpg","NineOfWands.jpg","TenOfWands.jpg",
        "PageOfWands.jpg","KnightOfWands.jpg","QueenOfWands.jpg","KingOfWands.jpg"
      ]
    };

    // Utility: shuffle and pick N cards
    function getRandomCards(deckArray, count) {
      const shuffled = [...deckArray].sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    // Detect deck choice from URL (?spread=familiar&deck=major)
    const params = new URLSearchParams(window.location.search);
    const deckChoice = params.get("deck") || "major"; // default major

    function buildFamiliarSpread(deckChoice) {
      const spreadContainer = document.getElementById("familiar-spread");
      spreadContainer.innerHTML = "";

      const chosenDeck = decks[deckChoice];
      if (!chosenDeck) {
        spreadContainer.innerHTML = "<p>Deck not found.</p>";
        return;
      }

      const selectedCards = getRandomCards(chosenDeck, 10);

      for (let row = 0; row < 2; row++) {
        const rowDiv = document.createElement("div");
        rowDiv.className = "row";

        for (let i = 0; i < 5; i++) {
          const cardIndex = row * 5 + i;
          const img = document.createElement("img");
          img.src = `images/${deckChoice}/${selectedCards[cardIndex]}`;
          img.alt = selectedCards[cardIndex];
          img.className = "tarot-card";
          rowDiv.appendChild(img);
        }
        spreadContainer.appendChild(rowDiv);
      }
    }

    buildFamiliarSpread(deckChoice);
  </script>

</body>
</html>
