<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Nine Familiar's Guidance Spread</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fdf6e3;
      color: #333;
      text-align: center;
      padding-top: 30px;
    }

    h1 {
      margin-bottom: 20px;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .card-block {
      width: 220px;
    }

    .card-block img {
      width: 100%;
      border-radius: 8px;
      border: 2px solid #444;
      margin-bottom: 8px;
    }

    .card-block h4 {
      font-size: 0.9em;
      margin: 6px 0;
      color: #444;
    }

    .final-reading {
      margin-top: 40px;
      padding: 20px;
      border-top: 2px solid #444;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
    .button-row { margin-top: 30px; }
    button { margin: 5px; padding: 8px; }
  </style>
</head>
<body>
  <h1>The Familiar's Guidance Spread</h1>
  <p>This spread uses 10 cards and is ideal for meditation or deep reflection.</p>

  <div class="row row-top"></div>
  <div class="row row-bottom"></div>

  <div id="final-analysis" class="final-reading"></div>

  <div class="button-row">
  <p>Do you want another reading?</p>
  <button onclick="goNext('yes')">Yes</button>
  <button onclick="goNext('no')">No</button>
</div>

<script>
const MajorArcana = {
  0: { name:"The Fool", archetype:"beginnings", light:"trust and openness" },
  1: { name:"The Magician", archetype:"power", light:"manifestation and confidence" },
  2: { name:"The High Priestess", archetype:"intuition", light:"inner wisdom" },
  3: { name:"The Empress", archetype:"growth", light:"creativity and abundance" },
  4: { name:"The Emperor", archetype:"structure", light:"stability and leadership" },
  5: { name:"The Hierophant", archetype:"tradition", light:"spiritual guidance" },
  6: { name:"The Lovers", archetype:"connection", light:"union and choice" },
  7: { name:"The Chariot", archetype:"determination", light:"victory and momentum" },
  8: { name:"Strength", archetype:"inner power", light:"courage and compassion" },
  9: { name:"The Hermit", archetype:"introspection", light:"inner guidance" },
  10:{ name:"Wheel of Fortune", archetype:"cycles", light:"change and opportunity" },
  11:{ name:"Justice", archetype:"truth", light:"balance and clarity" },
  12:{ name:"The Hanged Man", archetype:"perspective", light:"surrender and insight" },
  13:{ name:"Death", archetype:"transformation", light:"ending and rebirth" },
  14:{ name:"Temperance", archetype:"healing", light:"harmony and integration" },
  15:{ name:"The Devil", archetype:"attachment", light:"awareness and release" },
  16:{ name:"The Tower", archetype:"revelation", light:"sudden transformation" },
  17:{ name:"The Star", archetype:"hope", light:"renewal and faith" },
  18:{ name:"The Moon", archetype:"intuition", light:"emotional awareness" },
  19:{ name:"The Sun", archetype:"joy", light:"vitality and success" },
  20:{ name:"Judgement", archetype:"awakening", light:"reflection and renewal" },
  21:{ name:"The World", archetype:"completion", light:"wholeness and fulfillment" }
};

  const minorArcana = [
  "Ace of Cups","Two of Cups","Three of Cups","Four of Cups","Five of Cups",
  "Six of Cups","Seven of Cups","Eight of Cups","Nine of Cups","Ten of Cups",
  "Page of Cups","Knight of Cups","Queen of Cups","King of Cups",
  "Ace of Swords","Two of Swords","Three of Swords","Four of Swords","Five of Swords",
  "Six of Swords","Seven of Swords","Eight of Swords","Nine of Swords","Ten of Swords",
  "Page of Swords","Knight of Swords","Queen of Swords","King of Swords",
  "Ace of Wands","Two of Wands","Three of Wands","Four of Wands","Five of Wands",
  "Six of Wands","Seven of Wands","Eight of Wands","Nine of Wands","Ten of Wands",
  "Page of Wands","Knight of Wands","Queen of Wands","King of Wands",
  "Ace of Pentacles","Two of Pentacles","Three of Pentacles","Four of Pentacles","Five of Pentacles",
  "Six of Pentacles","Seven of Pentacles","Eight of Pentacles","Nine of Pentacles","Ten of Pentacles",
  "Page of Pentacles","Knight of Pentacles","Queen of Pentacles","King of Pentacles"
];

const positions = [
  "What you have already survived",
  "A lesson that shaped your resilience",
  "A past ending that transformed you",
  "A strength you are rediscovering",
  "An instinct that protected you",
  "Your current state of renewal",
  "A challenge testing your adaptability",
  "A lesson still unfolding",
  "A hidden ally or influence",
  "The wisdom you are growing into"
];

  /* ---------- DECK SELECTION ---------- */
const params = new URLSearchParams(window.location.search);
const deckChoice = params.get("deck") || "mixed"; // major, minor, or mixed

let deck;
if (deckChoice === "major") {
  deck = majorArcana;
} else if (deckChoice === "minor") {
  deck = minorArcana;
} else {
  deck = [...majorArcana, ...minorArcana]; // default to mixed
}

  /* ---------- PICK 10 RANDOM CARDS ---------- */
  deck.sort(() => Math.random() - 0.5); // shuffle
const selectedCards = deck.slice(0, 10);

  const topRow = document.querySelector(".row-top");
const bottomRow = document.querySelector(".row-bottom");

  /* ---------- RENDER CARDS ---------- */
selectedCards.forEach((cardName, index) => {
  const block = document.createElement("div");
  block.className = "card-block";

  const filePath = `private/images/${cardName.replace(/\s+/g,'_')}.png`;

  block.innerHTML = `
    <img src="${filePath}" 
         alt="${cardName}" 
         onerror="this.onerror=null;this.src='https://via.placeholder.com/150x250?text=${encodeURIComponent(cardName)}';">
    <h4>${positions[index]}</h4>
    <p>${cardName}</p>
  `;

  if (index < 5) {
    topRow.appendChild(block);
  } else {
    bottomRow.appendChild(block);
  }
});

  /* ---------- FINAL ANALYSIS ---------- */
document.getElementById("final-analysis").innerHTML = `
  <h3>Final Reflection</h3>
  <p>
    The Familiar watches quietly, reminding you that survival is wisdom,
    and resilience is instinct. You have already endured more than you realize.
  </p>
`;

function goNext(answer) {
  window.location.href = answer === "yes" ? "shopping.html" : "Spreads.html";
}

</script>
</body>
</html>

