<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Familiar Spread</title>

  <style>
    body {
      font-family: serif;
      background: #0f0f14;
      color: #eee;
      text-align: center;
      padding: 40px;
    }

    h1 {
      margin-bottom: 10px;
    }

    .spread {
      display: flex;
      flex-direction: column;
      gap: 30px;
      margin-top: 40px;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .card-block {
      width: 160px;
    }

    .card-block img {
      width: 100%;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.7);
    }

    .card-block h4 {
      margin-top: 10px;
      font-size: 0.9rem;
      font-weight: normal;
    }

    #final-analysis {
      margin-top: 60px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    button {
      margin-top: 40px;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      background: #b89cff;
      color: #000;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>

  <!-- YOUR DATA FILES -->
  <script src="tarotAnalysis.js"></script>
  <script src="minorArcanaAnalysis.js"></script>
</head>

<body>

<h1>The Familiar Spread</h1>
<p>A reading of instinct, survival, and quiet guidance.</p>

<div class="spread">
  <div class="row row-top"></div>
  <div class="row row-bottom"></div>
</div>

<div id="final-analysis"></div>

<button onclick="goNext('no')">Return to Spreads</button>

<script>
/* ---------------- HELPERS ---------------- */

function getCardNumber(path) {
  const m = path.match(/(\d+)\.png$/);
  return m ? parseInt(m[1], 10) : null;
}

function getMinorCardKey(path) {
  const m = path.match(/\/(swords|cups|pentacles|wands)\/(\d+)\.png$/i);
  return m ? m[1].toLowerCase() + m[2] : null;
}

/* ------------ POSITION LABELS ------------ */

const positions = [
  "What you have survived",
  "A lesson learned",
  "A past transformation",
  "A strength returning",
  "Your protective instinct",
  "Your present renewal",
  "A challenge ahead",
  "An unfolding lesson",
  "A hidden influence",
  "Emerging wisdom"
];

/* ------------ READ URL CARDS ------------ */

const params = new URLSearchParams(window.location.search);
let cards = [];

try {
  cards = JSON.parse(params.get("cards")) || [];
} catch {
  cards = [];
}

/* ------------ RENDER CARDS ------------ */

const topRow = document.querySelector(".row-top");
const bottomRow = document.querySelector(".row-bottom");

const half = Math.ceil(cards.length / 2);

cards.forEach((path, i) => {
  const majorNum = getCardNumber(path);
  const minorKey = getMinorCardKey(path);

  const cardData =
    tarotAnalysis?.[majorNum] ||
    minorArcanaAnalysis?.[minorKey];

  if (!cardData) return;

  const block = document.createElement("div");
  block.className = "card-block";
  block.innerHTML = `
    <img src="${path}" alt="Tarot card">
    <h4>${positions[i] || ""}</h4>
  `;

  if (i < half) {
    topRow.appendChild(block);
  } else {
    bottomRow.appendChild(block);
  }
});

/
