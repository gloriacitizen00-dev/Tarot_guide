<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Shopping Center Catalog</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .cart-icon {
      position: fixed;
      top: 10px;
      right: 20px;
      font-size: 20px;
      z-index: 10;
      cursor: pointer;
    }

    .catalog {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
      justify-content: center;
      margin-top: 60px;
    }

    .product {
      background: white;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0px 3px 6px rgba(0,0,0,0.2);
      width: 350px;
      transition: transform 0.2s;
    }

    .product:hover { transform: scale(1.05); }

    .product img {
      width: 100%;
      height: 300px;
      object-fit: contain;
      border-radius: 8px;
      background-color: white;
    }

    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    .modal-content {
      background: white;
      padding: 20px; 25px;
      border-radius: 12px;
      text-align: justify;
      max-width: 400px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      gap: 15px;
      font-size: 14px;
      line-height: 1.5;
      color: #333;
    }

    .modal-text p { 
      margin-bottom: 12px; 
    }
    
    .modal-content p {
      margin: 0;
    }

    .modal-content button, 
    .modal-content select {
      margin: 5px;
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }


    .btn-yes { background-color: #4CAF50; color: white; }
    .btn-no { background-color: #f44336; color: white; }
    .btn-add { background-color: #6a5acd; color: white; }
    .btn-delete { background-color: #ff5555; color: white; }
    .cart-item { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
  </style>
</head>
<body>

  <!-- Icono del carrito -->
  <div class="cart-icon">
    ðŸ›’ <span id="cart-count">0</span>
  </div>

  <!-- CatÃ¡logo -->
  <div class="catalog">
    
    <div class="product"
      data-name="Tarot Guide Ebook"
      data-description="This ebook teaches you a unique way to communicate with the stars through the insight of your feline companion, 
      while exploring the magical practice of the Maneko Neki Prosperity Calling. Perfect for anyone seeking to awaken intuition,
      strengthen their bond with their familiar, and explore the mystical forces that shape your world."
      data-price="4.99">
      <img src="Ebook.png" alt="Trot Guide Ebook">
      <p>Complete tarot interpretation guide for beginners and experts.</p>
  </div>
  
    <div class="product" 
      data-name="Tarot Deck"
      data-description="A beautifully illustrated tarot deck that enhances intuitive readings and deepens your spiritual practice."
     data-price="7.99">
      <img src="cards_mockup.png" alt="Producto 2">
      
      <p>A beautifully illustrated tarot deck for intuitive readings.</p>
    </div>

  
    <div class="product" 
      data-name="Papel Ecologico"
      data-description="Eco-friendly paper made from sugarcane fiber."
      data-price="2.00">
      <img src="Seven.JPG" alt="Producto 3">
      <p>Paper for printing, writing, and office use, made from sugarcane fiber, 
        internationally recognized as a Friend of Nature.
      </p>
    </div>

  <!-- Modal para agregar productos -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <p id="modal-text"></p>
      <div id="question-section">
        <button id="yes-btn" class="btn-yes">Yes</button>
        <button id="no-btn" class="btn-no">No</button>
      </div>
      <div id="quantity-section">
        <label for="quantity">Â¿How many?</label>
        <select id="quantity">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <button id="add-btn" class="btn-add">Add</button>
      </div>
    </div>
  </div>

  <!-- Modal del carrito -->
  <div id="cart-modal" class="modal">
    <div class="modal-content">
      <h3>Your cart</h3>
      <div id="cart-items"></div>
      <button id="close-cart" class="btn-no">Close</button>
      <button id="go-payment" class="btn-yes">Go to Payment</button>
    </div>
  </div>

<script>
  // --- Inicializar carrito desde localStorage ---
  let cart = JSON.parse(localStorage.getItem('cart')) || {};
  const products = document.querySelectorAll('.product');
  const modal = document.getElementById('modal');
  const modalText = document.getElementById('modal-text');
  const yesBtn = document.getElementById('yes-btn');
  const noBtn = document.getElementById('no-btn');
  const quantitySection = document.getElementById('quantity-section');
  const addBtn = document.getElementById('add-btn');
  const cartCount = document.getElementById('cart-count');
  let selectedProduct = null;

  // Modal carrito
  const cartModal = document.getElementById('cart-modal');
  const cartItemsDiv = document.getElementById('cart-items');
  const closeCartBtn = document.getElementById('close-cart');
  const goPaymentBtn = document.getElementById('go-payment');

  // Inicializar contador del carrito
  function updateCartCount() {
    let totalCount = Object.values(cart).reduce((a,b) => a+b, 0);
    cartCount.textContent = totalCount;
  }
  updateCartCount();

  const modalInfo = document.getElementById('modal-info');
  // --- Eventos productos ---
  products.forEach(product => {
    product.addEventListener('click', () => {
      selectedProduct = product.dataset.name;
      const description = product.dataset.description;
      
      modalText.innerHTML = `
     <p><strong>${selectedProduct}</strong></p>
     <p>${description}</p>
     <p>Do you want to add this product to the cart?</p>
      `;
      
      modal.style.display = 'flex';
      quantitySection.style.display = 'none';
      document.getElementById('question-section').style.display = 'block';
    });
  });

  yesBtn.addEventListener('click', () => {
    quantitySection.style.display = 'block';
    document.getElementById('question-section').style.display = 'none';
  });
  noBtn.addEventListener('click', () => { modal.style.display = 'none'; });

  addBtn.addEventListener('click', () => {
    const quantity = parseInt(document.getElementById('quantity').value);
    const productElement = document.querySelector(`[data-name="${selectedProduct}"]`);
    const price = parseFloat(productElement.dataset.price);
    
    if(cart[selectedProduct]) {
      cart[selectedProduct].quantity += quantity;
    } else {
      cart[selectedProduct] = { quantity: quantity, price: price };
    }
                          
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    modal.style.display = 'none';
  });

  // --- Abrir carrito ---
  document.querySelector('.cart-icon').addEventListener('click', () => {
    cartItemsDiv.innerHTML = '';
    for (let key in cart) {
      const item = cart[key];
      const subtotal = item.quantity * item.price;
      
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <span>${key} (Quantity: ${item.quantity}) - $${subtotal.toFixed(2)}</span>
        <button class="btn-delete" data-product="${key}">Delete</button>
      `;
      cartItemsDiv.appendChild(div);
    }
    cartModal.style.display = 'flex';
  });

  // --- Cerrar carrito ---
  closeCartBtn.addEventListener('click', () => {
    cartModal.style.display = 'none';
  });

  // --- Ir a payment.html ---
  goPaymentBtn.addEventListener('click', () => {
    cartModal.style.display = 'none';
    window.location.href = 'payment.html';
  });

  // --- Eliminar productos ---
  cartItemsDiv.addEventListener('click', (e) => {
    if(e.target.classList.contains('btn-delete')) {
      const product = e.target.dataset.product;
      delete cart[product];
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      e.target.parentElement.remove();
    }
  });
</script>

</body>
</html>
